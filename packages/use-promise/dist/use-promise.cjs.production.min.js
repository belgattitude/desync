'use strict';
Object.defineProperty(exports, '__esModule', { value: !0 });
var e = require('react'),
  u = require('@desync/use-deep-compare-memoize');
exports.usePromise = function(r, n, t) {
  var c,
    i = e.useState(null),
    o = i[0],
    a = i[1],
    l = e.useState(!0),
    s = l[0],
    f = l[1],
    d = e.useState(null !== (c = null == t ? void 0 : t.initialData) && void 0 !== c ? c : null),
    p = d[0],
    m = d[1],
    v = e.useReducer(function(e) {
      return e + 1;
    }, 0),
    b = v[0],
    C = v[1],
    S = e.useRef(!0),
    h = u.useDeepCompareMemoize(n),
    k = e.useCallback(
      function() {
        return (
          S.current && (f(!0), m(null), a(null)),
          r(n)
            .then(function(e) {
              S.current && (m(e), f(!1));
            })
            .catch(function(e) {
              S.current && (a(e), f(!1));
            })
        );
      },
      [r, h]
    );
  return (
    e.useEffect(
      function() {
        return (
          (S.current = !0),
          k(),
          function() {
            S.current = !1;
          }
        );
      },
      [b, k, !0]
    ),
    {
      data: p,
      isLoading: s,
      error: o,
      reload: e.useCallback(
        function() {
          C();
        },
        [b]
      ),
    }
  );
};
//# sourceMappingURL=use-promise.cjs.production.min.js.map
